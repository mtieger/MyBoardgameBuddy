<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HF4A — Dev Backlog</title>
  <style>
    :root {
      --bg-0: #0B0D10; --bg-1: #14171C; --bg-2: #1B2028;
      --text-0: #F2F2F2; --text-1: #B8C0CC; --text-2: #7E8794;
      --line-0: #1F242C; --line-1: #2B313B;
      --accent-blue: #0B3D91; --accent-blue-bright: #1a52c4;
      --ok: #2FBF71; --caution: #F2C94C; --inprogress: #2D9CDB;
      --font-ui: Inter, system-ui, -apple-system, sans-serif;
      --font-mono: "IBM Plex Mono", ui-monospace, Menlo, Consolas, monospace;
      --r-1: 2px; --r-2: 6px;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; background: var(--bg-0); color: var(--text-0); font-family: var(--font-ui); font-size: 14px; line-height: 1.6; -webkit-font-smoothing: antialiased; }
    .shell { max-width: 860px; margin: 0 auto; padding: 48px 24px 80px; }
    .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 32px; padding-bottom: 24px; border-bottom: 1px solid var(--line-0); }
    .header__eyebrow { font-size: 10px; letter-spacing: 0.15em; text-transform: uppercase; color: var(--accent-blue-bright); margin-bottom: 6px; font-family: var(--font-mono); }
    .header__title { font-size: 26px; font-weight: 700; letter-spacing: -0.02em; }
    .header__sub { font-size: 12px; color: var(--text-2); margin-top: 4px; }
    .counters { display: flex; gap: 24px; align-items: flex-start; }
    .counter { text-align: right; }
    .counter__num { font-family: var(--font-mono); font-size: 28px; font-weight: 700; line-height: 1; }
    .counter__num--inprogress { color: var(--inprogress); }
    .counter__label { font-size: 10px; letter-spacing: 0.12em; text-transform: uppercase; color: var(--text-2); }
    .progress-bar { height: 3px; background: var(--line-0); border-radius: 2px; margin-bottom: 36px; overflow: hidden; display: flex; }
    .progress-bar__done { height: 100%; background: var(--ok); transition: width 400ms ease; }
    .progress-bar__inprogress { height: 100%; background: var(--inprogress); transition: width 400ms ease; }
    .item { margin-bottom: 10px; border-radius: var(--r-2); overflow: hidden; transition: all 200ms ease; }
    .item--done { opacity: 0.35; }
    .item--task { border: 1px solid var(--line-0); }
    .item--task.item--inprogress { border-color: rgba(45,156,219,0.5); box-shadow: 0 0 0 1px rgba(45,156,219,0.15); }
    .item--task .item__header { display: flex; align-items: center; justify-content: space-between; padding: 13px 16px; background: var(--bg-1); cursor: pointer; gap: 12px; user-select: none; }
    .item--task.item--inprogress .item__header { background: rgba(45,156,219,0.06); }
    .item__left { display: flex; align-items: center; gap: 12px; flex: 1; min-width: 0; }
    .item__num { font-family: var(--font-mono); font-size: 10px; color: var(--accent-blue-bright); letter-spacing: 0.1em; white-space: nowrap; background: rgba(11,61,145,0.2); border: 1px solid rgba(11,61,145,0.4); border-radius: var(--r-1); padding: 3px 7px; }
    .item--inprogress .item__num { color: var(--inprogress); background: rgba(45,156,219,0.15); border-color: rgba(45,156,219,0.4); }
    .item__title { font-size: 13px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .item__desc { font-size: 11px; color: var(--text-2); margin-top: 2px; }
    .item__actions { display: flex; align-items: center; gap: 8px; flex-shrink: 0; }
    .btn-copy { padding: 5px 12px; background: var(--accent-blue); color: var(--text-0); border: none; border-radius: var(--r-1); font-size: 11px; font-weight: 700; letter-spacing: 0.05em; text-transform: uppercase; cursor: pointer; font-family: inherit; transition: all 140ms ease; white-space: nowrap; }
    .btn-copy:hover { background: var(--accent-blue-bright); }
    .btn-copy.copied { background: var(--ok); color: #000; }
    .btn-inprogress { padding: 5px 10px; background: transparent; color: var(--text-2); border: 1px solid var(--line-1); border-radius: var(--r-1); font-size: 11px; cursor: pointer; font-family: inherit; transition: all 140ms ease; white-space: nowrap; }
    .btn-inprogress:hover { color: var(--inprogress); border-color: var(--inprogress); }
    .btn-inprogress.is-inprogress { color: var(--inprogress); border-color: var(--inprogress); background: rgba(45,156,219,0.1); }
    .btn-done { padding: 5px 10px; background: transparent; color: var(--text-2); border: 1px solid var(--line-1); border-radius: var(--r-1); font-size: 11px; cursor: pointer; font-family: inherit; transition: all 140ms ease; white-space: nowrap; }
    .btn-done.is-done { color: var(--ok); border-color: var(--ok); }
    .item__body { display: none; padding: 0 16px 16px; background: var(--bg-1); border-top: 1px solid var(--line-0); }
    .item--inprogress .item__body { background: rgba(45,156,219,0.04); }
    .item__body.open { display: block; }
    .prompt-box { margin-top: 14px; background: var(--bg-0); border: 1px solid var(--line-1); border-radius: var(--r-1); padding: 14px 16px; font-family: var(--font-mono); font-size: 12px; color: var(--text-1); line-height: 1.7; white-space: pre-wrap; }
    .chevron { width: 16px; height: 16px; color: var(--text-2); flex-shrink: 0; transition: transform 200ms ease; }
    .chevron.open { transform: rotate(180deg); }
    .item--warning { border: 1px solid rgba(242,201,76,0.3); background: rgba(242,201,76,0.04); }
    .item--warning.item--done { border-color: var(--line-0); background: transparent; }
    .item--warning .item__header { display: flex; align-items: flex-start; justify-content: space-between; gap: 12px; padding: 12px 16px; }
    .warning-left { display: flex; gap: 10px; align-items: flex-start; flex: 1; }
    .warning-icon { font-size: 15px; flex-shrink: 0; margin-top: 1px; }
    .warning-label { font-size: 10px; font-weight: 700; letter-spacing: 0.12em; text-transform: uppercase; color: var(--caution); margin-bottom: 3px; }
    .warning-num { font-family: var(--font-mono); font-size: 10px; color: var(--caution); background: rgba(242,201,76,0.15); border: 1px solid rgba(242,201,76,0.35); border-radius: var(--r-1); padding: 3px 7px; margin-right: 8px; }
    .warning-text { font-size: 13px; color: var(--text-1); line-height: 1.5; }
    .divider { display: flex; align-items: center; gap: 12px; margin: 24px 0 14px; }
    .divider__line { flex: 1; height: 1px; background: var(--line-0); }
    .divider__label { font-size: 10px; letter-spacing: 0.12em; text-transform: uppercase; color: var(--text-2); white-space: nowrap; font-family: var(--font-mono); }
    .toast { position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%) translateY(80px); background: var(--ok); color: #000; font-size: 11px; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; padding: 10px 20px; border-radius: var(--r-1); transition: transform 240ms cubic-bezier(0.2,0.8,0.2,1); pointer-events: none; z-index: 999; }
    .toast.show { transform: translateX(-50%) translateY(0); }
  </style>
</head>
<body>
<div class="shell">

  <div class="header">
    <div>
      <div class="header__eyebrow">High Frontier 4 All</div>
      <div class="header__title">Dev Backlog</div>
      <div class="header__sub">Setup Assistant — VS Code Prompt Queue</div>
    </div>
    <div class="counters">
      <div class="counter">
        <div class="counter__num counter__num--inprogress" id="inprogress-count">0</div>
        <div class="counter__label">In Progress</div>
      </div>
      <div class="counter">
        <div class="counter__num" id="remaining-count">12</div>
        <div class="counter__label">Remaining</div>
      </div>
    </div>
  </div>

  <div class="progress-bar">
    <div class="progress-bar__done" id="progress-done" style="width:0%"></div>
    <div class="progress-bar__inprogress" id="progress-inprogress" style="width:0%"></div>
  </div>

  <div class="divider"><div class="divider__line"></div><div class="divider__label">Visual Style</div><div class="divider__line"></div></div>

  <div class="item item--task" id="item-1">
    <div class="item__header" onclick="toggleItem(1)">
      <div class="item__left"><span class="item__num">01</span><div><div class="item__title">Extract and apply NASA styles</div><div class="item__desc">Move all styles to styles.css · apply design tokens</div></div></div>
      <div class="item__actions">
        <button class="btn-inprogress" onclick="markInProgress(event,1)">▶ In Progress</button>
        <button class="btn-copy" onclick="copyPrompt(event,1)">Copy</button>
        <button class="btn-done" onclick="markDone(event,1)">✓ Done</button>
        <svg class="chevron" id="chevron-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
      </div>
    </div>
    <div class="item__body" id="body-1"><div class="prompt-box" id="prompt-1">Move all inline styles and any &lt;style&gt; blocks from index.html into the existing styles.css file. Then ensure &lt;link rel='stylesheet' href='styles.css'&gt; is in the head of index.html and remove the style blocks. Once moved, rewrite styles.css to use the NASA-inspired design tokens already defined in the file — map all existing class names and component styles to the CSS variables for color, spacing, typography, and shape. Don't change any visual logic or app functionality.</div></div>
  </div>

  <div class="item item--warning" id="item-2">
    <div class="item__header">
      <div class="warning-left"><span class="warning-icon">⚠️</span><div><div class="warning-label"><span class="warning-num">02</span>Don't Forget — After 01</div><div class="warning-text">Open index.html in your browser and verify nothing visually broke before moving on.</div></div></div>
      <button class="btn-done" onclick="markDone(event,2)" style="flex-shrink:0;align-self:center;">✓ Done</button>
    </div>
  </div>

  <div class="divider"><div class="divider__line"></div><div class="divider__label">Rules Engine</div><div class="divider__line"></div></div>

  <div class="item item--task" id="item-3">
    <div class="item__header" onclick="toggleItem(3)">
      <div class="item__left"><span class="item__num">03</span><div><div class="item__title">Add in-game rulebook screen</div><div class="item__desc">Build session-rulebook screen with search</div></div></div>
      <div class="item__actions">
        <button class="btn-inprogress" onclick="markInProgress(event,3)">▶ In Progress</button>
        <button class="btn-copy" onclick="copyPrompt(event,3)">Copy</button>
        <button class="btn-done" onclick="markDone(event,3)">✓ Done</button>
        <svg class="chevron" id="chevron-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
      </div>
    </div>
    <div class="item__body" id="body-3"><div class="prompt-box" id="prompt-3">In index.html, create a new screen called "session-rulebook". It should call buildSessionRulebook() using the actual current game session config and display the filtered rules organized by section. Each rule should show its title and text. Include a search bar that filters rules by keyword. At the top show a banner displaying the active modules, scenario, and variants. Include a Back button. Match the existing visual style. Don't change anything else.</div></div>
  </div>

  <div class="item item--task" id="item-4">
    <div class="item__header" onclick="toggleItem(4)">
      <div class="item__left"><span class="item__num">04</span><div><div class="item__title">Wire up rulebook entry points</div><div class="item__desc">Add My Rulebook button · update Rules nav</div></div></div>
      <div class="item__actions">
        <button class="btn-inprogress" onclick="markInProgress(event,4)">▶ In Progress</button>
        <button class="btn-copy" onclick="copyPrompt(event,4)">Copy</button>
        <button class="btn-done" onclick="markDone(event,4)">✓ Done</button>
        <svg class="chevron" id="chevron-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
      </div>
    </div>
    <div class="item__body" id="body-4"><div class="prompt-box" id="prompt-4">In index.html, add a "My Rulebook" button to the in-game screen that navigates to the session-rulebook screen. Also update the existing "Rules" button on the home screen to navigate to the same screen but call buildSessionRulebook() with all modules and no filters so it shows the complete unfiltered rulebook. Don't change anything else.</div></div>
  </div>

  <div class="divider"><div class="divider__line"></div><div class="divider__label">UI Screens</div><div class="divider__line"></div></div>

  <div class="item item--task" id="item-5">
    <div class="item__header" onclick="toggleItem(5)">
      <div class="item__left"><span class="item__num">05</span><div><div class="item__title">Scenario and variant rules buttons</div><div class="item__desc">Rules button per scenario · rules button per variant</div></div></div>
      <div class="item__actions">
        <button class="btn-inprogress" onclick="markInProgress(event,5)">▶ In Progress</button>
        <button class="btn-copy" onclick="copyPrompt(event,5)">Copy</button>
        <button class="btn-done" onclick="markDone(event,5)">✓ Done</button>
        <svg class="chevron" id="chevron-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
      </div>
    </div>
    <div class="item__body" id="body-5"><div class="prompt-box" id="prompt-5">In index.html, on the scenarios page, add a "Rules" button next to each scenario. On the variants page, add a "Rules" button next to each variant toggle. Each button should open a modal or new screen showing the complete rules for that specific scenario or variant. Match the existing visual style. Don't change anything else.</div></div>
  </div>

  <div class="item item--warning" id="item-6">
    <div class="item__header">
      <div class="warning-left"><span class="warning-icon">⚠️</span><div><div class="warning-label"><span class="warning-num">06</span>Don't Forget — After 05</div><div class="warning-text">Test every scenario and variant Rules button to confirm they each display the correct content.</div></div></div>
      <button class="btn-done" onclick="markDone(event,6)" style="flex-shrink:0;align-self:center;">✓ Done</button>
    </div>
  </div>

  <div class="item item--task" id="item-7">
    <div class="item__header" onclick="toggleItem(7)">
      <div class="item__left"><span class="item__num">07</span><div><div class="item__title">Ready to Play rules button</div><div class="item__desc">Add Rules & Player Aids button · navigate to new screen</div></div></div>
      <div class="item__actions">
        <button class="btn-inprogress" onclick="markInProgress(event,7)">▶ In Progress</button>
        <button class="btn-copy" onclick="copyPrompt(event,7)">Copy</button>
        <button class="btn-done" onclick="markDone(event,7)">✓ Done</button>
        <svg class="chevron" id="chevron-7" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
      </div>
    </div>
    <div class="item__body" id="body-7"><div class="prompt-box" id="prompt-7">In index.html, on the Ready to Play screen, add a "Rules & Player Aids" button. When tapped it should navigate to a new screen called "rules-and-aids". Don't build that screen yet. Don't change anything else.</div></div>
  </div>

  <div class="item item--task" id="item-8">
    <div class="item__header" onclick="toggleItem(8)">
      <div class="item__left"><span class="item__num">08</span><div><div class="item__title">Build rules-and-aids screen</div><div class="item__desc">Two buttons — Rules and Player Aids</div></div></div>
      <div class="item__actions">
        <button class="btn-inprogress" onclick="markInProgress(event,8)">▶ In Progress</button>
        <button class="btn-copy" onclick="copyPrompt(event,8)">Copy</button>
        <button class="btn-done" onclick="markDone(event,8)">✓ Done</button>
        <svg class="chevron" id="chevron-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
      </div>
    </div>
    <div class="item__body" id="body-8"><div class="prompt-box" id="prompt-8">In index.html, create the "rules-and-aids" screen. It should have two buttons: "Rules" and "Player Aids". Include a Back button. Match the existing visual style. Don't change anything else.</div></div>
  </div>

  <div class="item item--task" id="item-9">
    <div class="item__header" onclick="toggleItem(9)">
      <div class="item__left"><span class="item__num">09</span><div><div class="item__title">Build rules viewer with toggle</div><div class="item__desc">Complete vs session rules · toggle between modes</div></div></div>
      <div class="item__actions">
        <button class="btn-inprogress" onclick="markInProgress(event,9)">▶ In Progress</button>
        <button class="btn-copy" onclick="copyPrompt(event,9)">Copy</button>
        <button class="btn-done" onclick="markDone(event,9)">✓ Done</button>
        <svg class="chevron" id="chevron-9" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
      </div>
    </div>
    <div class="item__body" id="body-9"><div class="prompt-box" id="prompt-9">In index.html, when the "Rules" button is tapped on the rules-and-aids screen, navigate to a rules viewer screen. At the top show a header that states either "Complete Game Rules" or "Session Rules" depending on how it was accessed. Include a toggle that lets the player switch between the two modes. The session rules version should call buildSessionRulebook() with the current game config. The complete rules version should show all rules unfiltered. Include a Back button. Don't change anything else.</div></div>
  </div>

  <div class="item item--warning" id="item-10">
    <div class="item__header">
      <div class="warning-left"><span class="warning-icon">⚠️</span><div><div class="warning-label"><span class="warning-num">10</span>Don't Forget — After 09</div><div class="warning-text">Update the "Rules" button on the home screen to read "Rules & Player Aids": "In index.html, update the Rules button on the home screen to read 'Rules & Player Aids' and navigate to the rules-and-aids screen. Don't change anything else."</div></div></div>
      <button class="btn-done" onclick="markDone(event,10)" style="flex-shrink:0;align-self:center;">✓ Done</button>
    </div>
  </div>

  <div class="item item--task" id="item-11">
    <div class="item__header" onclick="toggleItem(11)">
      <div class="item__left"><span class="item__num">11</span><div><div class="item__title">Build player aids screen</div><div class="item__desc">Button per aid · display aid images</div></div></div>
      <div class="item__actions">
        <button class="btn-inprogress" onclick="markInProgress(event,11)">▶ In Progress</button>
        <button class="btn-copy" onclick="copyPrompt(event,11)">Copy</button>
        <button class="btn-done" onclick="markDone(event,11)">✓ Done</button>
        <svg class="chevron" id="chevron-11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
      </div>
    </div>
    <div class="item__body" id="body-11"><div class="prompt-box" id="prompt-11">In index.html, when the "Player Aids" button is tapped on the rules-and-aids screen, navigate to a new player-aids screen. It should show a button for each player aid. Each button navigates to a screen that displays the appropriate player aid image from the images folder. Include a Back button on each screen. Match the existing visual style. Don't change anything else.</div></div>
  </div>

  <div class="divider"><div class="divider__line"></div><div class="divider__label">Final</div><div class="divider__line"></div></div>

  <div class="item item--warning" id="item-12">
    <div class="item__header">
      <div class="warning-left"><span class="warning-icon">⚠️</span><div><div class="warning-label"><span class="warning-num">12</span>Don't Forget — End-to-End Test</div><div class="warning-text">Run through the full app flow: home screen → game setup → Ready to Play → Rules & Player Aids. Verify both the complete and session rulebooks work, the toggle switches correctly, and all player aid images display properly.</div></div></div>
      <button class="btn-done" onclick="markDone(event,12)" style="flex-shrink:0;align-self:center;">✓ Done</button>
    </div>
  </div>

</div>
<div class="toast" id="toast">Copied to clipboard</div>

<script>
  const TOTAL = 12;
  const done = new Set();
  const inprogress = new Set();

  try {
    const saved = localStorage.getItem('hf4a-backlog-v3');
    if (saved) {
      const state = JSON.parse(saved);
      (state.done || []).forEach(id => done.add(id));
      (state.inprogress || []).forEach(id => inprogress.add(id));
    }
  } catch(e) {}

  function save() {
    try { localStorage.setItem('hf4a-backlog-v3', JSON.stringify({ done: [...done], inprogress: [...inprogress] })); } catch(e) {}
  }

  function updateProgress() {
    const remaining = TOTAL - done.size;
    document.getElementById('remaining-count').textContent = remaining;
    document.getElementById('inprogress-count').textContent = inprogress.size;
    document.getElementById('progress-done').style.width = Math.round((done.size / TOTAL) * 100) + '%';
    document.getElementById('progress-inprogress').style.width = Math.round((inprogress.size / TOTAL) * 100) + '%';
  }

  function toggleItem(id) {
    const body = document.getElementById('body-' + id);
    const chevron = document.getElementById('chevron-' + id);
    if (body) body.classList.toggle('open');
    if (chevron) chevron.classList.toggle('open');
  }

  function markInProgress(e, id) {
    e.stopPropagation();
    const item = document.getElementById('item-' + id);
    const btn = e.currentTarget;
    if (inprogress.has(id)) {
      inprogress.delete(id);
      item.classList.remove('item--inprogress');
      btn.classList.remove('is-inprogress');
      btn.textContent = '▶ In Progress';
    } else {
      inprogress.add(id);
      item.classList.add('item--inprogress');
      btn.classList.add('is-inprogress');
      btn.textContent = '▶ Active';
      const body = document.getElementById('body-' + id);
      const chevron = document.getElementById('chevron-' + id);
      if (body) body.classList.add('open');
      if (chevron) chevron.classList.add('open');
    }
    save(); updateProgress();
  }

  function markDone(e, id) {
    e.stopPropagation();
    const item = document.getElementById('item-' + id);
    const btn = e.currentTarget;
    if (done.has(id)) {
      done.delete(id);
      item.classList.remove('item--done');
      btn.classList.remove('is-done');
    } else {
      done.add(id);
      inprogress.delete(id);
      item.classList.add('item--done');
      item.classList.remove('item--inprogress');
      btn.classList.add('is-done');
      const ipBtn = item.querySelector('.btn-inprogress');
      if (ipBtn) { ipBtn.classList.remove('is-inprogress'); ipBtn.textContent = '▶ In Progress'; }
      const body = document.getElementById('body-' + id);
      const chevron = document.getElementById('chevron-' + id);
      if (body) body.classList.remove('open');
      if (chevron) chevron.classList.remove('open');
    }
    save(); updateProgress();
  }

  function copyPrompt(e, id) {
    e.stopPropagation();
    navigator.clipboard.writeText(document.getElementById('prompt-' + id).innerText).then(() => {
      const btn = e.currentTarget;
      btn.textContent = '✓ Copied';
      btn.classList.add('copied');
      showToast();
      setTimeout(() => { btn.textContent = 'Copy'; btn.classList.remove('copied'); }, 2000);
    });
  }

  function showToast() {
    const t = document.getElementById('toast');
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 2000);
  }

  done.forEach(id => {
    const item = document.getElementById('item-' + id);
    const btn = item ? item.querySelector('.btn-done') : null;
    if (item) item.classList.add('item--done');
    if (btn) btn.classList.add('is-done');
  });
  inprogress.forEach(id => {
    const item = document.getElementById('item-' + id);
    const btn = item ? item.querySelector('.btn-inprogress') : null;
    if (item) item.classList.add('item--inprogress');
    if (btn) { btn.classList.add('is-inprogress'); btn.textContent = '▶ Active'; }
    const body = document.getElementById('body-' + id);
    const chevron = document.getElementById('chevron-' + id);
    if (body) body.classList.add('open');
    if (chevron) chevron.classList.add('open');
  });
  updateProgress();
</script>
</body>
</html>
